"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppContext = void 0;
const React = require("react");
const react_1 = require("react");
const create_context_1 = require("./create-context");
const isDev = process.env.NODE_ENV !== 'production';
window.STORE_CONTEXT = create_context_1.clientContext;
function reducer(state, action) {
    switch (action.type) {
        case 'updateContext':
            if (isDev) {
                console.log('[SSR:updateContext]: dispatch updateContext with action');
                console.log(action);
            }
            return { ...state, ...action.payload };
        default:
            throw new Error(`Action type ${action.type} is incorrect Please use type updateContext `);
    }
}
function AppContext(props) {
    const [state, dispatch] = react_1.useReducer(reducer, window.__INITIAL_DATA__);
    return (React.createElement(create_context_1.clientContext.Provider, { value: { state, dispatch } }, props.children));
}
exports.AppContext = AppContext;

import * as React from 'react';
import { useReducer } from 'react';
import { clientContext as Context } from './create-context';
const isDev = process.env.NODE_ENV !== 'production';
window.STORE_CONTEXT = Context;
function reducer(state, action) {
    switch (action.type) {
        case 'updateContext':
            if (isDev) {
                console.log('[SSR:updateContext]: dispatch updateContext with action');
                console.log(action);
            }
            return { ...state, ...action.payload };
        default:
            throw new Error(`Action type ${action.type} is incorrect Please use type updateContext `);
    }
}
export function AppContext(props) {
    const [state, dispatch] = useReducer(reducer, window.__INITIAL_DATA__);
    return (React.createElement(Context.Provider, { value: { state, dispatch } }, props.children));
}

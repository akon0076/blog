"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getManifest = void 0;
const path_1 = require("path");
const axios_1 = require("axios");
const cwd_1 = require("./cwd");
const loadConfig_1 = require("./loadConfig");
let manifest = {};
const getManiFest = async () => {
    const { isDev, fePort, https } = loadConfig_1.loadConfig();
    if (Object.keys(manifest).length !== 0) {
        return;
    }
    const cwd = cwd_1.getCwd();
    if (isDev) {
        const res = await axios_1.default.get(`${https ? 'https' : 'http'}://localhost:${fePort}/asset-manifest.json`);
        manifest = res.data;
    }
    else {
        manifest = require(path_1.join(cwd, './build/client/asset-manifest.json'));
    }
};
const getManifest = async () => {
    await getManiFest();
    return manifest;
};
exports.getManifest = getManifest;
